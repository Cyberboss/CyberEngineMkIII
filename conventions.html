<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>CyberEngineMkIII: Conventions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CyberEngineMkIII
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li><a href="contexts.html"><span>Contexts</span></a></li>
      <li><a href="conventions.html"><span>Conventions</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="todo.html"><span>Todo</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Conventions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#conv_intro">Introduction</a></li>
<li class="level1"><a href="#va_names">Coding Covention</a></li>
<li class="level1"><a href="#structors">Default Constructors and Destructor</a></li>
<li class="level1"><a href="#interstructors">Interop Construction</a></li>
<li class="level1"><a href="#raii">RAII and Strong Guarantee</a></li>
<li class="level1"><a href="#tspec">Thread Specification</a><ul><li class="level2"><a href="#tspec_safe">Thread Safety</a></li>
<li class="level2"><a href="#tspec_callback">Callback Thread</a></li>
<li class="level2"><a href="#tspec_inline">Shared Inline</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="conv_intro"></a>
Introduction</h1>
<h1><a class="anchor" id="va_names"></a>
Coding Covention</h1>
<ul>
<li>The entire CyberEngineMkIII API is contained within the <a class="el" href="namespace_c_y_b_1_1_a_p_i.html" title="Namespace containing the public API define EXPLICIT_API_USAGE to prevent automatic &#39;using&#39;...">CYB::API</a> namespace.</li>
<li>The C++ standard specifies only a public/private default access difference between structs and classes. However, it will always be made explicit in declarations</li>
<li>Never use struct</li>
<li>Function/Template arguments will always be prefixed with 'A', the rest of the title will either be descriptive of it's use or the type's distinctive name</li>
<li>Data structure fields will always be prefixed with 'F', the rest of the title will either be descriptive of it's use or the type's distinctive name</li>
<li>const will be used wherever possible</li>
<li>Assert and HCF should be used to check impossible pre/post conditions</li>
<li>HCF will be optimized as unreachable in release builds</li>
<li>enum classes should be preferred to regular enums</li>
<li>Functions where bodies must reside in headers will use .inl files</li>
<li>Internal translation units and headers are prefixed with <a class="el" href="namespace_c_y_b.html" title="Encapsulates the engine in it&#39;s entirety. ">CYB</a></li>
<li>Data stuctures must specify inheritance access</li>
<li>Data structures will be laid out in the following order<ul>
<li>Private/Protected/Public<ul>
<li>Enums</li>
<li>Subtypes</li>
<li>usings</li>
</ul>
</li>
<li>Fields with varying access for manipulation of type size and CPU caching<ul>
<li>Extended Types</li>
<li>References</li>
<li>Pointers</li>
<li>Standard types in descending size</li>
</ul>
</li>
<li>Private/Protected/Public<ul>
<li>Static functions</li>
<li>Default Constructor</li>
<li>Parameter Constructors (From least to most parameters)</li>
<li>Copy Constructor</li>
<li>Move Constructor</li>
<li>Move Assignment operator</li>
<li>Destructor</li>
<li>Pure virtual members</li>
<li>Virtual members</li>
<li>Members</li>
</ul>
</li>
</ul>
</li>
<li>All classes/fields/typedefs/enums must have at least brief documentation</li>
<li>All functions must have a brief, params, return value, template, exception spec, and thread safety documentation</li>
<li>Deleted functions are not documented</li>
<li>Strong typing is used wherever possible</li>
<li>C++ friending is not used</li>
<li>References to types will use the lowest possible namespace/class membership prefix</li>
<li>Virtual inheritance is not used</li>
<li>std::unqiue_ptrs of types with virtual destructors will be provided to a unit to manage the lifetime of internal objects</li>
<li>Prefer STL or other containers instead of raw new[]</li>
<li>Use unique_ptrs to own heap objects</li>
<li>Use references (If impossible, use standard pointers) to reference objects</li>
<li>Only use C++ new/delete operators to acquire/release heap memory</li>
<li>One line if/while/for cases shouldn't use curly braces, with the exception of else(if) abmiguity</li>
<li>In a switch statement, all enum based cases should be handled or it must contain a default statement</li>
<li>Functions with no parameters must contain void in their parameter list</li>
<li>Return types that are not references or pointers must never be const</li>
<li>Member functions that do not modify object data should be postfixed as const</li>
<li>Use <a class="el" href="class_c_y_b_1_1_a_p_i_1_1_threadable.html" title="The basic multithreading interface. ">CYB::API::Threadable</a> for multithreading</li>
</ul>
<h1><a class="anchor" id="structors"></a>
Default Constructors and Destructor</h1>
<p>The default C++ extended constructors apply. The copy constructor will copy an object verbatim. The move constructor and assignment operator will move the object without affecting it's state. The destructor will clean up an object and may perform other operations as specified</p>
<h1><a class="anchor" id="interstructors"></a>
Interop Construction</h1>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd>Write the interstructors documenatation</dd></dl>
<h1><a class="anchor" id="raii"></a>
RAII and Strong Guarantee</h1>
<p>All unit control paths should be able to shut down correctly in the event an exception unwinds the stack. This usually means flagging down and waiting for threads, running IO functions to save any data, and cleaning up owned objects. They should also provide the C++ strong guarantee, meaning that if an exception is throw, data will remain in a valid state. All engine functions provide both these guarantees.</p>
<h1><a class="anchor" id="tspec"></a>
Thread Specification</h1>
<p>A function will always note the thread safety of a function or the thread on which a function will run in the case of a callback. The specification types are as follows</p>
<p><a class="el" href="conventions.html#tspec_inline">Shared Inline</a> <br/>
<a class="el" href="conventions.html#tspec_safe">Thread Safety</a> <br/>
<a class="el" href="conventions.html#tspec_callback">Callback Thread</a></p>
<p>Note that function specific documentation overrides what is written here</p>
<h2><a class="anchor" id="tspec_safe"></a>
Thread Safety</h2>
<p>This specification is for an engine call that uses an interface class' vtable. It designates which threads can call the function, and at what time</p>
<p>Some common language:</p>
<ul>
<li>Can be called from any thread at any time<ul>
<li>There is no issue in calling from multiple threads at the same time</li>
</ul>
</li>
<li>Can be called from any thread at any time, though return order is not guaranteed<ul>
<li>There is no issue in calling from multiple threads at the same time. However, CyberEngine uses fast locks to sychronize access and, if there is enough traffic in the function, some threads may wait for a long time before executing</li>
</ul>
</li>
<li>Can only be called from the main thread<ul>
<li>The main thread is defined as the thread that an Application's Run, DedicatedServer, or Invoke call is made. No other thread can call this function</li>
</ul>
</li>
<li>Access per X instance must be synchronized<ul>
<li>This particular function can be called at the same time for one instance of the target object</li>
</ul>
</li>
<li>All access must be synchronized for each target instance<ul>
<li>This puts a function into the synchronized group for a class. No two functions in this group can be called at the same time for one instance of the target object</li>
</ul>
</li>
<li>All access must be synchronized<ul>
<li>No two threads may call this function at the same time</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="tspec_callback"></a>
Callback Thread</h2>
<p>Functions within this group are usually inlines from the headers or implementations of abstract classes. These document exactly which thread the function will be called from within the engine.</p>
<p>The thread that owns the Context is the thread that had SetupContext called on it for that context. That thread will call this function</p>
<h2><a class="anchor" id="tspec_inline"></a>
Shared Inline</h2>
<p>All functions within this group have their sources available in the CyberEngineMkIII headers. A developer can determine the amount of thread safety possible </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
